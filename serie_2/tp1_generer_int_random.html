<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TP 1 : GENERER UN NOMBRE ENTIER ALEATOIRE</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="container">
      <select id="op" onchange="changer_operation()">
        <option value="/">Division</option>
        <option value="+">Somme</option>
        <option value="-">Soustraction</option>
        <option value="*" selected>Produit</option>
      </select>
      <button onclick="generer_entier(10)">GENERER</button>
      <hr />
      <div id="nombre_aleatoire1" class="e">0</div>
      <div class="e" id="nombre_aleatoire2">0</div>
      REPONSE : <input type="number" name="" id="rep_user" />
      <button type="button" onclick="repondre()">Valider</button>
      <div id="resultat"></div>
      <img src="" alt="" id="tof" />
      Score :
      <div id="score">
        0
      </div>
    </div>

    <script>
      let d2 = document.getElementById("nombre_aleatoire2");
      let d1 = document.getElementById("nombre_aleatoire1");
      let score = 0;
      let nombre_reponse = 0;
      function generer_entier(max) {
        // recuprer les balises html : div#nombre_aleatoire

        //generer le nombre aleatoire (ramdon number)
        let n1 = parseInt(Math.random() * max); // permet de generer un nombre aleatoire entre 0 et max
        let n2 = parseInt(Math.random() * max); // permet de generer un nombre aleatoire entre 0 et max
        // mettre ce nombre dans le le div nombre_aleatoire
        d1.innerHTML = n1;
        d2.innerHTML = n2;
        /*  if (rep_user == n1 * n2) {
          r.innerHTML = "BONNE REPONSE";
        } else {
          r.innerHTML = "MAUVAISE REPONSE";
        }
      */
      }

      function repondre() {
        nombre_reponse++;
        let r = document.getElementById("resultat");
        let rep_user = document.getElementById("rep_user").value;
        let n1 = document.getElementById("nombre_aleatoire1").innerText;
        let n2 = document.getElementById("nombre_aleatoire2").innerText;
        let im = document.getElementById("tof");
        let op = document.getElementById("op").value;
        let div_score = document.getElementById("score");
        console.log("n1 est " + n1);
        console.log("n2 est " + n2);
        console.log("rep_user est " + rep_user);
        console.log("bonne reponse est  " + n1 * n2);
        let bonne_reponse = 0;
        if (op == "*") {
          bonne_reponse = n1 * n2;
        }
        if (op == "+") {
          bonne_reponse = parseInt(n1) + parseInt(n2);
        }
        if (op == "/") {
          bonne_reponse = n1 / n2;
        }
        if (op == "-") {
          bonne_reponse = n1 - n2;
        }
        //"4"+"4"="44"
        //4+4=8
        if (rep_user == bonne_reponse) {
          r.innerHTML = "BONNE REPONSE";
          im.src = "ok.png";
          score++;
        } else {
          r.innerHTML = "MAUVAISE REPONSE";
          im.src = "error.png";
        }
        div_score.innerHTML =
          (score / nombre_reponse) * 20 +
          "/20<br> sur " +
          nombre_reponse +
          " Essai(s)";
        generer_entier(10);
      }
    </script>
  </body>
</html>
